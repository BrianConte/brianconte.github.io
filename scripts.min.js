d3.customTooltip=function(){function t(){e=d3.select("body").append("div").attr("class","nodesToolTip")}var e=d3.select("body").append("div").attr("class","nodesToolTip"),n=d3.select("svg"),r={x:window.scrollX,y:window.scrollY,w:window.innerWidth,h:window.innerHeight},a=d3.select("body"),o={w:a.node().offsetWidth,h:a.node().offsetHeight},i=(document.width,document.height,function(t){for(var e=d3.select("body").node(),n=0,r=0;null!=t&&t!=e;n+=t.offsetLeft||t.clientLeft,r+=t.offsetTop||t.clientTop,t=t.offsetParent||t.parentNode);return{x:n,y:r}}(n.node())),s={x:10,y:10};return t.show=function(t){e.style("right",""),e.style("left",""),e.style("bottom",""),e.style("top","");var a=d3.mouse(n.node());r.x=window.scrollX,r.y=window.scrollY,a[0]+=i.x,a[1]+=i.y,a[0]>r.x+r.w/2?e.style("right",o.w-a[0]+s.x+"px"):e.style("left",a[0]+s.x+"px"),a[1]>r.y+r.h/2?e.style("bottom",o.h-a[1]+s.y+"px"):e.style("top",a[1]+s.y+"px"),e.style("display","inline-block"),e.html(t)},t.hide=function(){e.style("display","none")},t},d3.graph=function(t,e){var n=d3.select(e),r=+n.attr("width"),a=+n.attr("height"),o=d3.scaleOrdinal(d3.schemeCategory20),i=d3.forceSimulation().force("link",d3.forceLink().distance(100).strength(1).id(function(t){return t.id})).force("charge",d3.forceManyBody()).force("collide",d3.forceCollide(function(t){return t.r+8}).iterations(32)).force("center",d3.forceCenter(r/2,a/2)),s=n.append("g").attr("class","links").selectAll("line").data(t.links).enter().append("line").attr("stroke-width",function(t){return Math.sqrt(t.value)}),l=n.append("g").attr("class","nodes").selectAll("circle").data(t.nodes).enter().append("g").attr("class","cls_node_g").on("mouseout",function(t){customTooltip.hide()}).on("mousemove",function(t){t.fullText&&customTooltip.show(t.fullText)}),c=l.append("circle").attr("r",function(t){return t.r}).attr("fill",function(t){return o(t.group)}).call(d3.drag().on("start",function(t){d3.event.active||i.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",function(t){t.fx=d3.event.x,t.fy=d3.event.y}).on("end",function(t){d3.event.active||i.alphaTarget(0),t.fx=null,t.fy=null})),u=l.append("g");u.append("text").text(function(t){return t.id}).attr("dy",0).attr("dx",0).attr("text-anchor","middle").style("font-family","Anton").style("font-size",function(t){return t.r/3+"px"}).style("fill","white").style("text-transform","uppercase"),n.selectAll("text").data(t.nodes).call(function(t,e){t.each(function(t){var n,r=d3.select(this),a=r.text().split(/\s+/).reverse(),o=[],i=r.attr("y");for(tspan=r.text(null).append("tspan").attr("x",0).attr("y",i).attr("dy","0.4em");n=a.pop();)o.push(n),tspan.text(o.join(" ")),tspan.node().getComputedTextLength()>e(t)&&o.length>1&&(tspan.node().setAttribute("dy",.4-.55+"em"),o.pop(),tspan.text(o.join(" ")),o=[n],tspan=r.append("tspan").attr("x",0).attr("y",i).attr("dy","1.1em").text(n))})},function(t){return 2*t.r}),i.nodes(t.nodes).on("tick",function(){s.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),c.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),u.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})}),i.force("link").links(t.links)},d3.gantt=function(){function t(){n=d3.scaleTime().domain([s,l]).range([0,h]).clamp(!0),r=d3.scaleBand().domain(u).rangeRound([0,p-i.top-i.bottom],.1),a=d3.axisBottom().scale(n).tickFormat(d3.timeFormat(m)).tickSize(8).tickPadding(8),o=d3.axisLeft().scale(r).tickSize(0)}function e(r,o){f=r.map(function(t){return t.startDate=new Date(t.startDate),t.endDate=new Date(t.endDate),t}),x(),t();var s=d3.select(o).attr("class","chart").attr("width",h+i.left+i.right).attr("height",p+i.top+i.bottom).append("g").attr("class","gantt-chart").attr("width",h+i.left+i.right).attr("height",p+i.top+i.bottom).attr("transform","translate("+i.left+", "+i.top+")");return bar=s.selectAll(".chart").data(f,y).enter().append("g").attr("class","g_bar").on("mouseout",function(t){customTooltip.hide()}).on("mousemove",function(t){t.fullText&&customTooltip.show(t.fullText)}),bar.append("rect").attr("rx",5).attr("ry",5).attr("class",function(t){return null==d[t.status]?"bar":d[t.status]}).attr("y",0).attr("transform",g).attr("height",function(t){return 30}).transition().duration(700).attr("width",function(t){return n(t.endDate)-n(t.startDate)}),bar.append("text").attr("class","barText").attr("transform",g).attr("x",5).attr("y",20).attr("fill","white").attr("text-anchor","start").attr("font-family","Anton").text(function(t){return t.taskName}),s.append("g").attr("class","x axis").attr("transform","translate(0, "+(p-i.top-i.bottom)+")").transition().call(a),e}var n,r,a,o,i={top:20,right:40,bottom:20,left:40},s=d3.timeDay.offset(new Date,-3),l=d3.timeHour.offset(new Date,3),c="fit",u=[],d=[],f=[],p=350-i.top-i.bottom-5,h=600-i.right-i.left-5,m="%H:%M",y=function(t){return t.startDate+t.taskName+t.endDate},g=function(t){return"translate("+n(t.startDate)+","+r(t.taskName)+")"};t();var x=function(){if("fit"===c){if(void 0===f||f.length<1)return s=d3.time.day.offset(new Date,-3),void(l=d3.time.hour.offset(new Date,3));f.sort(function(t,e){return t.endDate-e.endDate}),l=f[f.length-1].endDate,f.sort(function(t,e){return t.startDate-e.startDate}),s=f[0].startDate}};return e.redraw=function(i){x(),t();var s=d3.select("#experience > svg"),l=s.select(".gantt-chart").selectAll("rect").data(i,y);return l.enter().insert("rect",":first-child").attr("rx",5).attr("ry",5).attr("class",function(t){return null==d[t.status]?"bar":d[t.status]}).transition().attr("y",0).attr("transform",g).attr("height",function(t){return r.range()[1]}).attr("width",function(t){return n(t.endDate)-n(t.startDate)}),l.transition().attr("transform",g).attr("height",function(t){return r.range()[1]}).attr("width",function(t){return n(t.endDate)-n(t.startDate)}),l.exit().remove(),s.select(".x").transition().call(a),s.select(".y").transition().call(o),e},e.margin=function(t){return arguments.length?(i=t,e):i},e.timeDomain=function(t){return arguments.length?(s=+t[0],l=+t[1],e):[s,l]},e.timeDomainMode=function(t){return arguments.length?(c=t,e):c},e.taskTypes=function(t){return arguments.length?(u=t,e):u},e.taskStatus=function(t){return arguments.length?(d=t,e):d},e.width=function(t){return arguments.length?(h=+t,e):h},e.height=function(t){return arguments.length?(p=+t,e):p},e.tickFormat=function(t){return arguments.length?(m=t,e):m},e};